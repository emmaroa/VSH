<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Cotización</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background: #f8fafc;
      padding: 2rem;
      position: relative;
    }

    .marca-agua {
      position: fixed;
      top: 20%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0.08;
      z-index: 0;
      width: 70%;
    }

    .contenedor {
      background: white;
      padding: 2rem;
      border-radius: 12px;
      max-width: 900px;
      margin: auto;
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 1;
    }

    .encabezado {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }

    .logo {
      max-height: 80px;
    }

    .titulo {
      font-size: 1.5rem;
      color: #1e3a8a;
    }

    .datos {
      margin-bottom: 2rem;
    }

    .datos p {
      margin: 0.3rem 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 2rem;
    }

    th, td {
      border: 1px solid #e5e7eb;
      padding: 0.8rem;
      text-align: left;
    }

    th {
      background-color: #eff6ff;
    }

    .totales {
      text-align: right;
      font-size: 1rem;
    }

    .totales div {
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>

  <!-- Marca de agua -->
  <img src="logo.png" class="marca-agua" alt="Marca de agua">

  <div class="contenedor">
    <div class="encabezado">
      <img src="logo.png" alt="Logo" class="logo">
      <div class="titulo">Cotización N.º <span id="cot-numero">0001</span></div>
    </div>

    <div class="datos">
      <p><strong>Cliente:</strong> <span id="cot-cliente"></span></p>
      <p><strong>Dependencia:</strong> <span id="cot-dependencia"></span></p>
      <p><strong>Con Atención a:</strong> <span id="cot-atencion"></span></p>
      <p><strong>Fecha:</strong> <span id="cot-fecha"></span></p>
    </div>

    <table id="tabla-conceptos">
      <thead>
        <tr>
          <th>Cantidad</th>
          <th>Descripción</th>
          <th>Precio Unitario</th>
          <th>Importe</th>
        </tr>
      </thead>
      <tbody>
        <!-- Se llena con JavaScript -->
      </tbody>
    </table>

    <div class="totales">
      <div><strong>Subtotal:</strong> $<span id="cot-subtotal">0.00</span></div>
      <div><strong>IVA (16%):</strong> $<span id="cot-iva">0.00</span></div>
      <div><strong>Total:</strong> $<span id="cot-total">0.00</span></div>
    </div>
  </div>

  <script>
    // Simular carga de localStorage
    const datos = JSON.parse(localStorage.getItem('cotizacionActual'));

    if (datos) {
      document.getElementById('cot-numero').textContent = datos.numero;
      document.getElementById('cot-cliente').textContent = datos.cliente;
      document.getElementById('cot-dependencia').textContent = datos.dependencia;
      document.getElementById('cot-atencion').textContent = datos.atencion;
      document.getElementById('cot-fecha').textContent = new Date().toLocaleDateString();

      // Agregar conceptos
      const tablaBody = document.querySelector('#tabla-conceptos tbody');
      datos.conceptos.forEach(c => {
        const fila = document.createElement('tr');
        fila.innerHTML = `
          <td>${c.cantidad}</td>
          <td>${c.descripcion}</td>
          <td>$${parseFloat(c.precio).toFixed(2)}</td>
          <td>$${(c.cantidad * c.precio).toFixed(2)}</td>
        `;
        tablaBody.appendChild(fila);
      });

      document.getElementById('cot-subtotal').textContent = datos.subtotal;
      document.getElementById('cot-iva').textContent = datos.iva;
      document.getElementById('cot-total').textContent = datos.total;
    }
  </script>
</body>
</html>
