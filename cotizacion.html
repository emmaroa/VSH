<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Cotización</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f7fa;
      color: #333;
      max-width: 700px;
      margin: 20px auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background: white;
    }
    h1, h2 {
      color: #0074D9;
    }
    #logo {
      max-width: 150px;
      margin-bottom: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    table, th, td {
      border: 1px solid #0074D9;
    }
    th, td {
      padding: 8px;
      text-align: left;
    }
    tfoot td {
      font-weight: bold;
    }
    .right {
      text-align: right;
    }
  </style>
</head>
<body>

  <img src="logo.png" alt="Logo de la empresa" id="logo" />

  <h1>Cotización</h1>

  <div id="datos-cliente"></div>

  <table>
    <thead>
      <tr>
        <th>Descripción</th>
        <th>Cantidad</th>
        <th>Precio Unitario</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody id="tabla-conceptos"></tbody>
    <tfoot>
      <tr>
        <td colspan="3" class="right">Subtotal:</td>
        <td id="subtotal"></td>
      </tr>
      <tr>
        <td colspan="3" class="right">IVA (16%):</td>
        <td id="iva"></td>
      </tr>
      <tr>
        <td colspan="3" class="right">Total:</td>
        <td id="total"></td>
      </tr>
    </tfoot>
  </table>

  <script>
    // Cargar datos guardados en localStorage
    const datos = JSON.parse(localStorage.getItem('cotizacion'));

    if (!datos) {
      document.body.innerHTML = "<h2>No hay datos de cotización para mostrar.</h2>";
      throw new Error("No hay datos de cotización");
    }

    // Mostrar datos del cliente
    document.getElementById('datos-cliente').innerHTML = `
      <strong>Cliente:</strong> ${datos.cliente} <br />
      <strong>Dependencia:</strong> ${datos.dependencia} <br />
      <strong>Con Atención a:</strong> ${datos.atencion}
    `;

    // Mostrar los conceptos en tabla
    const tbody = document.getElementById('tabla-conceptos');
    datos.items.forEach(item => {
      const fila = document.createElement('tr');
      fila.innerHTML = `
        <td>${item.descripcion}</td>
        <td>${item.cantidad}</td>
        <td>$${item.precio.toFixed(2)}</td>
        <td>$${item.total.toFixed(2)}</td>
      `;
      tbody.appendChild(fila);
    });

    // Mostrar subtotal, IVA y total
    document.getElementById('subtotal').textContent = "$" + datos.subtotal.toFixed(2);
    document.getElementById('iva').textContent = "$" + datos.iva.toFixed(2);
    document.getElementById('total').textContent = "$" + datos.total.toFixed(2);
  </script>

</body>
</html>
